(this.webpackJsonpvoltorbflipjs=this.webpackJsonpvoltorbflipjs||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/voltorb_marker.99f58e1e.svg"},function(e,t,a){e.exports=a.p+"static/media/voltorb.636f6788.svg"},,,,,,function(e,t,a){e.exports=a(51)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,function(e,t){},,,,,,,,,function(e,t){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,r,i,c=a(0),l=a.n(c),o=a(15),s=a.n(o),u=(a(22),a(8)),d=a(4),m=a(5);!function(e){e[e.Voltorb=0]="Voltorb",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three"}(n||(n={})),function(e){e[e.Hidden=0]="Hidden",e[e.Flipped=1]="Flipped"}(r||(r={})),function(e){e[e.Voltorb=0]="Voltorb",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three"}(i||(i={}));var p=function(){function e(t){Object(d.a)(this,e),this.type=void 0,this.state=r.Hidden,this.markers=[],this.type=t}return Object(m.a)(e,[{key:"flip",value:function(){return this.state=r.Flipped,this.type!==n.Voltorb}},{key:"mark",value:function(e){this.markers.includes(e)?this.markers.splice(this.markers.indexOf(e),1):this.markers.push(e)}},{key:"isFlipped",value:function(){return this.state===r.Flipped}},{key:"isMultiplier",value:function(){return this.type>=i.Two}}]),e}(),f=a(10),h=a.n(f),v=a(11),b=a.n(v),k=(a(23),function(e){var t=e.marker;return l.a.createElement("div",{className:"boardSpaceMarker marker_".concat(t.toString())},E(t))}),E=function(e){switch(e){case i.Voltorb:return l.a.createElement("img",{src:h.a,alt:"Voltorb marker"});default:return l.a.createElement("span",null,e)}},y=function(e){switch(e.type){case n.Voltorb:return l.a.createElement("div",{className:"spaceVoltorb"},l.a.createElement("span",null,l.a.createElement("img",{src:b.a,alt:"Voltorb space"})));default:return l.a.createElement("div",{className:"spaceMultiplier"},l.a.createElement("span",null,e.type))}},g=function(e){var t=e.space,a=e.handleSpaceClick;return l.a.createElement("div",{className:"space boardSpace ".concat(t.state===r.Hidden?"hidden":"flipped")},l.a.createElement("div",{className:"spaceBorder"},l.a.createElement("div",{className:"spaceInner"},l.a.createElement("div",{className:"spaceFront",onClick:function(e){return a(t)}},l.a.createElement("div",{className:"markers"},t.markers.map((function(e){return l.a.createElement(k,{marker:e})})))),l.a.createElement("div",{className:"spaceBack"},t.state===r.Flipped&&y(t)))))};a(24);var S=function(e){var t=e.spaces;return l.a.createElement("div",{className:"space spacesSummary"},l.a.createElement("div",{className:"spaceBorder"},l.a.createElement("div",{className:"spaceInner spaceSummaryInner"},l.a.createElement("div",{className:"spacesSummaryMultiplierTotal"},function(e){return e.reduce((function(e,t){return t.type!==n.Voltorb?e+t.type:e}),0)}(t)),l.a.createElement("div",{className:"spacesSummaryVoltorbTotal"},l.a.createElement("img",{src:b.a,alt:"Voltorb"}),l.a.createElement("span",null,function(e){return e.reduce((function(e,t){return t.type===n.Voltorb?e+1:e}),0)}(t))))))},N=(a(25),function(e){var t=e.spaces,a=e.handleSpaceClick,n=e.rowIndex;return l.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return l.a.createElement(g,{key:"space_".concat(n,"_").concat(t),space:e,handleSpaceClick:a})})),l.a.createElement(S,{spaces:t}))});a(26);function O(e,t){return t.map((function(t){return t[e]}))}var w,M=function(e){var t=e.board,a=e.handleSpaceClick,n=t.spaces;return l.a.createElement("div",{className:"board"},n.map((function(e,t){return l.a.createElement(N,{key:"boardrow_".concat(t),spaces:e,handleSpaceClick:a,rowIndex:t})})),l.a.createElement("div",{className:"bottomSummary"},n.map((function(e,t){return l.a.createElement(S,{key:"board_column_summary_".concat(t),spaces:O(t,n)})}))))},C=a(13),R=a.n(C),V=a(6),j=a(16);!function(e){e[e.Active=0]="Active",e[e.Lost=1]="Lost",e[e.Complete=2]="Complete"}(w||(w={}));var T,F=function(){function e(t){var a=this;Object(d.a)(this,e),this.difficulty=void 0,this.spaces=void 0,this.width=5,this.height=5,this.numberOfMultipliers=function(){return a.difficulty+2},this.numberOfVoltorbs=function(){return a.difficulty>=5?10:a.difficulty+5},this.totalNumberOfSpaces=function(){return a.width*a.height},this.numberOfOneSpaces=function(){return a.totalNumberOfSpaces()-(a.numberOfMultipliers()+a.numberOfVoltorbs())},this.difficulty=t,this.spaces=[]}return Object(m.a)(e,[{key:"buildSpaces",value:function(e){this.spaces=this.generateSpaces(e)}},{key:"generateSpaces",value:function(e){for(var t=[],a=this.seededElements(e),n=0;n<this.height;n++){t.push([]);for(var r=0;r<this.width;r++)t[n][r]=a[n*this.width+r]}return t}},{key:"seededElements",value:function(e){var t=[].concat(Object(V.a)(this.buildMultipliers(e)),Object(V.a)(this.buildVoltorbs()),Object(V.a)(this.buildOneSpaces()));return t=j.shuffle(t,e().toString(36).substring(2))}},{key:"buildMultipliers",value:function(e){return Array(this.numberOfMultipliers()).fill(0).map((function(){return e()<.6?new p(n.Two):new p(n.Three)}))}},{key:"buildVoltorbs",value:function(){return Array(this.numberOfVoltorbs()).fill(0).map((function(){return new p(n.Voltorb)}))}},{key:"buildOneSpaces",value:function(){return Array(this.numberOfOneSpaces()).fill(0).map((function(){return new p(n.One)}))}},{key:"allSpaces",value:function(){return this.spaces.reduce((function(e,t){return[].concat(Object(V.a)(e),Object(V.a)(t))}))}},{key:"allMultiplierSpaces",value:function(){return this.allSpaces().filter((function(e){return e.isMultiplier()}))}},{key:"flippedSpaces",value:function(){return this.allSpaces().filter((function(e){return e.isFlipped()}))}},{key:"flippedMultiplierSpaces",value:function(){return this.flippedSpaces().filter((function(e){return e.isMultiplier()}))}},{key:"getCurrentRoundPoints",value:function(){return this.flippedMultiplierSpaces().reduce((function(e,t){return e*t.type}),1)}},{key:"checkBoard",value:function(){return this.isBoardLost()?w.Lost:this.isBoardComplete()?w.Complete:w.Active}},{key:"isBoardLost",value:function(){return void 0!==this.flippedSpaces().find((function(e){return e.type===n.Voltorb}))}},{key:"isBoardComplete",value:function(){return this.flippedMultiplierSpaces().filter((function(e){return e.state===r.Flipped})).length===this.allMultiplierSpaces().length}}]),e}();!function(e){e[e.Playing=0]="Playing",e[e.RoundLost=1]="RoundLost",e[e.Intermission=2]="Intermission"}(T||(T={}));var I,P=function(){function e(){Object(d.a)(this,e),this.board=void 0,this.seed=this.randomSeed(),this.random=void 0,this.currentRoundPoints=0,this.totalPoints=0,this.state=T.Playing,this.flippedMultipliersCount=0,this.random=R()(this.seed),this.board=new F(1),this.board.buildSpaces(this.random)}return Object(m.a)(e,[{key:"updateBoardState",value:function(){switch(this.currentRoundPoints=this.board.getCurrentRoundPoints(),this.flippedMultipliersCount=this.board.flippedMultiplierSpaces().length,this.board.checkBoard()){case w.Active:this.state=T.Playing;break;case w.Complete:this.state=T.Intermission;break;case w.Lost:this.state=T.RoundLost}return this.state}},{key:"startRound",value:function(){this.board.buildSpaces(this.random),this.state=T.Playing}},{key:"nextRound",value:function(){this.state===T.RoundLost?this.handleLostRound():this.handleWonRound(),this.startRound()}},{key:"handleLostRound",value:function(){0===this.flippedMultipliersCount?this.board.difficulty=1:this.flippedMultipliersCount<=this.board.difficulty&&(this.board.difficulty=this.flippedMultipliersCount),this.currentRoundPoints=0}},{key:"handleWonRound",value:function(){this.board.difficulty<8&&(this.board.difficulty+=1)}},{key:"resetGame",value:function(){this.seed=this.randomSeed(),this.random=R()(this.seed),this.board.difficulty=1,this.currentRoundPoints=0,this.totalPoints=0}},{key:"startIntermission",value:function(){this.state=T.Intermission,this.totalPoints+=this.currentRoundPoints,this.currentRoundPoints=0}},{key:"randomSeed",value:function(){return Math.random().toString(36).substring(2)}}]),e}(),x=a(12),B=a.n(x),L=(a(45),function(e){var t=e.totalScore,a=e.currentRoundScore,n=e.highScore,r=function(e){return Math.round(e)};return l.a.createElement("div",{className:"gameScore"},l.a.createElement("div",{className:"gameScoreBorder current"},l.a.createElement("div",{className:"gameScoreInner"},l.a.createElement("div",{className:"name"},"Round points"),l.a.createElement("div",{className:"score"},l.a.createElement(B.a,{value:a,formatValue:r})))),l.a.createElement("div",{className:"gameScoreBorder total"},l.a.createElement("div",{className:"gameScoreInner"},l.a.createElement("div",{className:"name"},"Total points"),l.a.createElement("div",{className:"score"},l.a.createElement(B.a,{value:t,formatValue:r})))),l.a.createElement("div",{className:"gameScoreBorder highScore"},l.a.createElement("div",{className:"gameScoreInner"},l.a.createElement("div",{className:"name"},"High score"),l.a.createElement("div",{className:"score"},l.a.createElement(B.a,{value:n,formatValue:r})))))}),_=(a(46),function(e){var t=e.difficulty;return l.a.createElement("div",{className:"gameDifficulty"},l.a.createElement("h1",null,"VOLTORB Flip Lvl. ",t))}),A=(a(47),function(e){var t=e.children,a=e.type,n=e.className,r=e.handleOnClick;return l.a.createElement("button",{className:"btn btn-".concat(a," ").concat(n),onClick:r},t)}),H=(a(48),function(e){var t=e.children,a=e.show,n=e.className,r=void 0===n?"":n;return l.a.createElement("div",{className:"overlay ".concat(r," ").concat(a?"show":"")},l.a.createElement("div",{className:"overlayInner"},t))}),G=function(e){var t=e.handleNextRoundClick;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Round complete!"),l.a.createElement(A,{handleOnClick:t,type:"primary"},"Next round"))},W=function(e){var t=e.handleNextRoundClick,a=e.handleRestartClick;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Oh no a Voltorb!"),l.a.createElement("div",{className:"btnGroup"},l.a.createElement(A,{handleOnClick:a,type:"default"},"Restart"),l.a.createElement(A,{handleOnClick:t,type:"primary"},"Next round")))},J=function(e){var t=e.showOverlay,a=e.gameState,n=e.handleNextRoundClick,r=e.handleRestartClick;switch(a){case T.Intermission:return l.a.createElement(H,{show:t},l.a.createElement(G,{handleNextRoundClick:n}));case T.RoundLost:return l.a.createElement(H,{show:t,className:"intermission"},l.a.createElement(W,{handleNextRoundClick:n,handleRestartClick:r}));default:return null}},z=(a(49),function(e){var t=e.currentInputMode,a=e.handleInputModeChange;return l.a.createElement("div",{className:"gameInputMode"},l.a.createElement("div",{className:"markers"},l.a.createElement("div",{className:"marker voltorb ".concat(t===I.MarkingVoltorb?"selected":""),onClick:function(){return a(I.MarkingVoltorb)}},l.a.createElement("img",{src:h.a,alt:"Voltorb marker"})),l.a.createElement("div",{className:"marker text one ".concat(t===I.MarkingOne?"selected":""),onClick:function(){return a(I.MarkingOne)}},l.a.createElement("span",null,"1")),l.a.createElement("div",{className:"marker text two ".concat(t===I.MarkingTwo?"selected":""),onClick:function(){return a(I.MarkingTwo)}},l.a.createElement("span",null,"2")),l.a.createElement("div",{className:"marker text three ".concat(t===I.MarkingThree?"selected":""),onClick:function(){return a(I.MarkingThree)}},l.a.createElement("span",null,"3"))),l.a.createElement("div",{className:"flip ".concat(t===I.Flipping?"selected":""),onClick:function(){return a(I.Flipping)}},l.a.createElement("span",null,"Flip")))});a(50);!function(e){e[e.MarkingVoltorb=0]="MarkingVoltorb",e[e.MarkingOne=1]="MarkingOne",e[e.MarkingTwo=2]="MarkingTwo",e[e.MarkingThree=3]="MarkingThree",e[e.Flipping=4]="Flipping"}(I||(I={}));var D=window.localStorage,$=function(){var e=Object(c.useState)(new P),t=Object(u.a)(e,2),a=t[0],n=t[1],i=Object(c.useState)(!1),o=Object(u.a)(i,2),s=o[0],d=o[1],m=Object(c.useState)(I.Flipping),p=Object(u.a)(m,2),f=p[0],h=p[1],v=Object(c.useState)(parseInt(D.getItem("voltorbFlipHiScore")||"0")),b=Object(u.a)(v,2),k=b[0],E=b[1],y=function(e){e.mark(f.valueOf()),n(Object.create(a))},g=function(e){var t;e.state===r.Hidden&&a.state===T.Playing&&(e.flip(),a.updateBoardState(),console.log(a.state),a.state!==T.Playing&&(a.totalPoints>k&&(t=a.totalPoints,D.setItem("voltorbFlipHiScore",t.toString()),E(a.totalPoints)),setTimeout((function(){a.board.allSpaces().forEach((function(e){return e.flip()})),n(Object.create(a))}),500),setTimeout((function(){d(!0)}),2e3)),n(Object.create(a)))},S=function(){a.resetGame(),a.startRound(),n(Object.create(a)),d(!1)};return l.a.createElement("div",{className:"voltorbFlip"},a.board&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"boardArea"},l.a.createElement(M,{board:a.board,handleSpaceClick:function(e){f===I.Flipping?g(e):y(e)}}),l.a.createElement(J,{gameState:a.state,handleRestartClick:S,handleNextRoundClick:function(){a.nextRound(),n(Object.create(a)),d(!1)},showOverlay:s})),l.a.createElement("div",{className:"sidebar"},l.a.createElement("div",{className:"gameMenu"},l.a.createElement("div",{className:"details"},l.a.createElement(_,{difficulty:a.board.difficulty}),l.a.createElement(L,{totalScore:a.totalPoints,currentRoundScore:a.currentRoundPoints,highScore:k})),l.a.createElement("div",{className:"inputs"},l.a.createElement(z,{handleInputModeChange:function(e){h(e)},currentInputMode:f}),l.a.createElement("div",{className:"controls"},l.a.createElement(A,{handleOnClick:S,type:"secondary"},"Start new game")))),l.a.createElement("footer",null,"Created by ",l.a.createElement("a",{href:"https://twitter.com/icemaz",target:"_blank",rel:"noopener noreferrer"},"@icemaz")," - ",l.a.createElement("a",{href:"https://github.com/EdwardJFox/voltorb-flip",target:"_blank",rel:"noopener noreferrer"},"GitHub")))))};var q=function(){return l.a.createElement("div",{className:"App"},l.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[17,1,2]]]);
//# sourceMappingURL=main.62e9b312.chunk.js.map