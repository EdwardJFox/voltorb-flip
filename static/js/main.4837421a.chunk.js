(this.webpackJsonpvoltorbflipjs=this.webpackJsonpvoltorbflipjs||[]).push([[0],[,,,,,,,,,,,,,,,function(e,t,a){e.exports=a(50)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,,,,function(e,t){},,,,,,,,,function(e,t){},,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,r,c,i=a(0),l=a.n(i),o=a(13),s=a.n(o),u=(a(20),a(4)),m=a(8),d=(a(21),a(5)),f=a(6);!function(e){e[e.Voltorb=0]="Voltorb",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three"}(n||(n={})),function(e){e[e.Hidden=0]="Hidden",e[e.Flipped=1]="Flipped"}(r||(r={})),function(e){e[e.Voltorb=0]="Voltorb",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three"}(c||(c={}));var h=function(){function e(t){Object(d.a)(this,e),this.type=void 0,this.state=r.Hidden,this.markers=[],this.type=t}return Object(f.a)(e,[{key:"flip",value:function(){return this.state=r.Flipped,this.type!==n.Voltorb}},{key:"mark",value:function(e){this.markers.includes(e)?this.markers.splice(this.markers.indexOf(e),1):this.markers.push(e)}}]),e}(),p=(a(22),function(e){var t=e.marker;return l.a.createElement("div",{className:"boardSpaceMarker marker_".concat(t.toString())},v(t))}),v=function(e){switch(e){case c.Voltorb:return l.a.createElement("img",{src:"/voltorb_marker.svg",alt:"Voltorb marker"});default:return l.a.createElement("span",null,e)}},b=function(e){switch(e.type){case n.Voltorb:return l.a.createElement("div",{className:"spaceVoltorb"},l.a.createElement("span",null,l.a.createElement("img",{src:"/voltorb.svg",alt:"Voltorb space"})));default:return l.a.createElement("div",{className:"spaceMultiplier"},l.a.createElement("span",null,e.type))}},E=function(e){var t=e.space,a=e.handleSpaceClick;return l.a.createElement("div",{className:"space boardSpace ".concat(t.state===r.Hidden?"hidden":"flipped")},l.a.createElement("div",{className:"spaceBorder"},l.a.createElement("div",{className:"spaceInner"},l.a.createElement("div",{className:"spaceFront",onClick:function(e){return a(t)}},l.a.createElement("div",{className:"markers"},t.markers.map((function(e){return l.a.createElement(p,{marker:e})})))),l.a.createElement("div",{className:"spaceBack"},t.state===r.Flipped&&b(t)))))};a(23);var k=function(e){var t=e.spaces;return l.a.createElement("div",{className:"space spacesSummary"},l.a.createElement("div",{className:"spaceBorder"},l.a.createElement("div",{className:"spaceInner spaceSummaryInner"},l.a.createElement("div",{className:"spacesSummaryMultiplierTotal"},function(e){return e.reduce((function(e,t){return t.type!==n.Voltorb?e+t.type:e}),0)}(t)),l.a.createElement("div",{className:"spacesSummaryVoltorbTotal"},l.a.createElement("img",{src:"/voltorb.svg",alt:"Voltorb"}),l.a.createElement("span",null,function(e){return e.reduce((function(e,t){return t.type===n.Voltorb?e+1:e}),0)}(t))))))},y=(a(24),function(e){var t=e.spaces,a=e.handleSpaceClick,n=e.rowIndex;return l.a.createElement("div",{className:"boardRow"},t.map((function(e,t){return l.a.createElement(E,{key:"space_".concat(n,"_").concat(t),space:e,handleSpaceClick:a})})),l.a.createElement(k,{spaces:t}))});a(25);function g(e,t){return t.map((function(t){return t[e]}))}var O,N=function(e){var t=e.board,a=e.handleSpaceClick,n=(e.gameState,t.spaces);return l.a.createElement("div",{className:"board"},n.map((function(e,t){return l.a.createElement(y,{key:"boardrow_".concat(t),spaces:e,handleSpaceClick:a,rowIndex:t})})),l.a.createElement("div",{className:"bottomSummary"},n.map((function(e,t){return l.a.createElement(k,{key:"board_column_summary_".concat(t),spaces:g(t,n)})}))))},S=a(11),w=a.n(S),R=a(14),C=function(){function e(t){var a=this;Object(d.a)(this,e),this.difficulty=void 0,this.spaces=void 0,this.width=5,this.height=5,this.numberOfMultipliers=function(){return a.difficulty+2},this.numberOfVoltorbs=function(){return a.difficulty>=5?10:a.difficulty+5},this.totalNumberOfSpaces=function(){return a.width*a.height},this.numberOfOneSpaces=function(){return a.totalNumberOfSpaces()-(a.numberOfMultipliers()+a.numberOfVoltorbs())},this.difficulty=t,this.spaces=[]}return Object(f.a)(e,[{key:"buildSpaces",value:function(e){this.spaces=this.generateSpaces(e)}},{key:"generateSpaces",value:function(e){for(var t=[],a=this.seededElements(e),n=0;n<this.height;n++){t.push([]);for(var r=0;r<this.width;r++)t[n][r]=a[n*this.width+r]}return t}},{key:"seededElements",value:function(e){var t=[].concat(Object(u.a)(this.buildMultipliers(e)),Object(u.a)(this.buildVoltorbs()),Object(u.a)(this.buildOneSpaces()));return t=R.shuffle(t,e().toString(36).substring(2))}},{key:"flipCard",value:function(e,t){return this.spaces[e][t].flip()}},{key:"buildMultipliers",value:function(e){return Array(this.numberOfMultipliers()).fill(0).map((function(){return e()<.6?new h(n.Two):new h(n.Three)}))}},{key:"buildVoltorbs",value:function(){return Array(this.numberOfVoltorbs()).fill(0).map((function(){return new h(n.Voltorb)}))}},{key:"buildOneSpaces",value:function(){return Array(this.numberOfOneSpaces()).fill(0).map((function(){return new h(n.One)}))}}]),e}();!function(e){e[e.Playing=0]="Playing",e[e.RoundFailed=1]="RoundFailed",e[e.Intermission=2]="Intermission"}(O||(O={}));var M,V=function(){function e(){Object(d.a)(this,e),this.board=void 0,this.seed=this.randomSeed(),this.difficulty=1,this.random=void 0,this.currentRoundPoints=0,this.totalPoints=0,this.state=O.Playing}return Object(f.a)(e,[{key:"setup",value:function(){this.random=w()(this.seed),this.board=new C(this.difficulty)}},{key:"checkBoard",value:function(){var e=this.board.spaces.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t))})),t=e.filter((function(e){return e.state===r.Flipped})),a=e.filter((function(e){return e.type>1})),c=t.filter((function(e){return e.type>0}));return this.currentRoundPoints=c.reduce((function(e,t){return e*t.type}),1),t.find((function(e){return e.type===n.Voltorb}))?(this.state=O.RoundFailed,!0):a.filter((function(e){return e.state===r.Flipped})).length===a.length&&(this.startIntermission(),!0)}},{key:"startRound",value:function(){return this.board.buildSpaces(this.random),this.board.spaces}},{key:"nextRound",value:function(){return this.state===O.RoundFailed?(this.difficulty=1,this.board.difficulty=this.difficulty,this.currentRoundPoints=0):this.difficulty<8&&(this.difficulty+=1,this.board.difficulty=this.difficulty),this.state=O.Playing,this.startRound()}},{key:"resetGame",value:function(){return this.seed=this.randomSeed(),this.random=w()(this.seed),this.difficulty=1,this.board.difficulty=this.difficulty,this.currentRoundPoints=0,this.totalPoints=0,this.state=O.Playing,this.startRound()}},{key:"startIntermission",value:function(){this.state=O.Intermission,this.totalPoints+=this.currentRoundPoints,this.currentRoundPoints=0}},{key:"randomSeed",value:function(){return Math.random().toString(36).substring(2)}}]),e}(),j=a(10),F=a.n(j),T=(a(44),function(e){var t=e.totalScore,a=e.currentRoundScore,n=e.highScore,r=function(e){return Math.round(e)};return l.a.createElement("div",{className:"gameScore"},l.a.createElement("div",{className:"gameScoreBorder"},l.a.createElement("div",{className:"highScore"},l.a.createElement("div",{className:"name"},"High score"),l.a.createElement("div",{className:"score"},l.a.createElement(F.a,{value:n,formatValue:r})))),l.a.createElement("div",{className:"gameScoreBorder"},l.a.createElement("div",{className:"total"},l.a.createElement("div",{className:"name"},"Total points"),l.a.createElement("div",{className:"score"},l.a.createElement(F.a,{value:t,formatValue:r})))),l.a.createElement("div",{className:"gameScoreBorder"},l.a.createElement("div",{className:"current"},l.a.createElement("div",{className:"name"},"Current round"),l.a.createElement("div",{className:"score"},l.a.createElement(F.a,{value:a,formatValue:r})))))}),I=(a(45),function(e){var t=e.difficulty;return l.a.createElement("div",{className:"gameDifficulty"},l.a.createElement("h1",null,"VOLTORB Flip Lvl. ",t))}),P=(a(46),function(e){var t=e.children,a=e.type,n=e.className,r=e.handleOnClick;return l.a.createElement("button",{className:"btn btn-".concat(a," ").concat(n),onClick:r},t)}),x=(a(47),function(e){var t=e.children,a=e.show,n=e.className,r=void 0===n?"":n;return l.a.createElement("div",{className:"overlay ".concat(r," ").concat(a?"show":"")},l.a.createElement("div",{className:"overlayInner"},t))}),B=function(e){var t=e.handleNextRoundClick;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Round complete!"),l.a.createElement(P,{handleOnClick:t,type:"primary"},"Next round"))},_=function(e){var t=e.handleNextRoundClick,a=e.handleRestartClick;return l.a.createElement(l.a.Fragment,null,l.a.createElement("h2",null,"Oh no a Voltorb!"),l.a.createElement("div",{className:"btnGroup"},l.a.createElement(P,{handleOnClick:a,type:"default"},"Restart"),l.a.createElement(P,{handleOnClick:t,type:"primary"},"Next round")))},H=function(e){var t=e.showOverlay,a=e.gameState,n=e.handleNextRoundClick,r=e.handleRestartClick;switch(a){case O.Intermission:return l.a.createElement(x,{show:t},l.a.createElement(B,{handleNextRoundClick:n}));case O.RoundFailed:return l.a.createElement(x,{show:t,className:"intermission"},l.a.createElement(_,{handleNextRoundClick:n,handleRestartClick:r}));default:return null}},A=(a(48),function(e){var t=e.currentInputMode,a=e.handleInputModeChange;return l.a.createElement("div",{className:"gameInputMode"},l.a.createElement("div",{className:"markers"},l.a.createElement("div",{className:"marker voltorb ".concat(t===M.MarkingVoltorb?"selected":""),onClick:function(){return a(M.MarkingVoltorb)}},l.a.createElement("img",{src:"/voltorb_marker.svg",alt:"Voltorb marker"})),l.a.createElement("div",{className:"marker text one ".concat(t===M.MarkingOne?"selected":""),onClick:function(){return a(M.MarkingOne)}},l.a.createElement("span",null,"1")),l.a.createElement("div",{className:"marker text two ".concat(t===M.MarkingTwo?"selected":""),onClick:function(){return a(M.MarkingTwo)}},l.a.createElement("span",null,"2")),l.a.createElement("div",{className:"marker text three ".concat(t===M.MarkingThree?"selected":""),onClick:function(){return a(M.MarkingThree)}},l.a.createElement("span",null,"3"))),l.a.createElement("div",{className:"flip ".concat(t===M.Flipping?"selected":""),onClick:function(){return a(M.Flipping)}},l.a.createElement("span",null,"Flip")))});!function(e){e[e.MarkingVoltorb=0]="MarkingVoltorb",e[e.MarkingOne=1]="MarkingOne",e[e.MarkingTwo=2]="MarkingTwo",e[e.MarkingThree=3]="MarkingThree",e[e.Flipping=4]="Flipping"}(M||(M={}));var G=window.localStorage,J=function(){var e=Object(i.useState)(new V),t=Object(m.a)(e,2),a=t[0],n=t[1],c=Object(i.useState)(!1),o=Object(m.a)(c,2),s=o[0],d=o[1],f=Object(i.useState)(M.Flipping),h=Object(m.a)(f,2),p=h[0],v=h[1],b=Object(i.useState)(parseInt(G.getItem("voltorbFlipHiScore")||"0")),E=Object(m.a)(b,2),k=E[0],y=E[1];Object(i.useEffect)((function(){a.setup(),a.board.buildSpaces(a.random),n(Object.create(a))}),[]);var g=function(e){e.mark(p.valueOf()),n(Object.create(a))},S=function(e){var t;e.state===r.Hidden&&a.state===O.Playing&&(e.flip(),a.checkBoard()&&(a.totalPoints>k&&(t=a.totalPoints,G.setItem("voltorbFlipHiScore",t.toString()),y(a.totalPoints)),setTimeout((function(){a.board.spaces.reduce((function(e,t){return[].concat(Object(u.a)(e),Object(u.a)(t))})).forEach((function(e){return e.flip()})),n(Object.create(a))}),500),setTimeout((function(){d(!0)}),2e3)),n(Object.create(a)))},w=function(){a.resetGame(),n(Object.create(a)),d(!1)};return l.a.createElement("div",{className:"voltorbFlip"},a.board&&l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"boardArea"},l.a.createElement(N,{board:a.board,handleSpaceClick:function(e){p===M.Flipping?S(e):g(e)},gameState:a.state}),l.a.createElement(H,{gameState:a.state,handleRestartClick:w,handleNextRoundClick:function(){a.nextRound(),n(Object.create(a)),d(!1)},showOverlay:s})),l.a.createElement("div",{className:"sidebar"},l.a.createElement(I,{difficulty:a.difficulty}),l.a.createElement(T,{totalScore:a.totalPoints,currentRoundScore:a.currentRoundPoints,highScore:k}),l.a.createElement(A,{handleInputModeChange:function(e){v(e)},currentInputMode:p}),l.a.createElement("div",{className:"controls"},l.a.createElement(P,{handleOnClick:w,type:"secondary"},"Start new game")))))};a(49);var L=function(){return l.a.createElement("div",{className:"App"},l.a.createElement(J,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(L,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[15,1,2]]]);
//# sourceMappingURL=main.4837421a.chunk.js.map